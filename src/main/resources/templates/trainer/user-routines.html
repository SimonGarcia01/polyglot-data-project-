<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}"></head>
<body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <div class="container">
        <h1>User Routines</h1>
        <p th:if="${user != null}">
            Viewing routines for: <strong th:text="${user.name}">User Name</strong>
            (<span th:text="${user.email}">email</span>)
        </p>

        <a th:href="@{/trainer/dashboard}" class="btn btn-secondary">‚Üê Back to Dashboard</a>

        <!-- Alert Messages -->
        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

        <!-- Routines List -->
        <div class="card" th:if="${routines != null and !routines.empty}">
            <h2 class="card-title">Active Routines</h2>
            <div class="routines-grid">
                <div th:each="routine : ${routines}" class="routine-card">
                    <h3 th:text="${routine.name}">Routine Name</h3>
                    <p>
                        <span class="badge" th:if="${routine.isTemplate}" th:classappend="'badge-template'">Template</span>
                        <span class="badge" th:if="${routine.copiedFrom != null}" th:classappend="'badge-copied'">Copied</span>
                    </p>
                    <p><strong>Exercises:</strong> <span th:text="${routine.exercises.size()}">0</span></p>
                    <p><strong>Created:</strong> <span th:text="${#dates.format(routine.createdAt, 'dd/MM/yyyy')}">Date</span></p>

                    <div class="exercise-list" th:if="${routine.exercises != null and !routine.exercises.empty}">
                        <p><strong>Exercise Details:</strong></p>
                        <ul>
                            <li th:each="ex : ${routine.exercises}">
                                Exercise ID: <span th:text="${ex.exerciseId}">ID</span>
                                <span th:if="${ex.sets != null}"> - Sets: <span th:text="${ex.sets}">0</span></span>
                                <span th:if="${ex.reps != null}"> - Reps: <span th:text="${ex.reps}">0</span></span>
                                <span th:if="${ex.durationMin != null}"> - Duration: <span th:text="${ex.durationMin}">0</span> min</span>
                            </li>
                        </ul>
                    </div>

                    <div class="card-actions">
                        <a th:href="@{/routines/{id}(id=${routine.id})}" class="btn btn-sm btn-secondary">View Details</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Routines Message -->
        <div class="card" th:if="${routines == null or routines.empty}">
            <h2 class="card-title">No Routines</h2>
            <p>This user hasn't created any routines yet.</p>
        </div>

    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
